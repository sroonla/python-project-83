{
  "created": 1753133230.309827,
  "duration": 1.959479570388794,
  "exitcode": 1,
  "root": "/mnt/c/Users/sr0on/Projects/python-project-83",
  "environment": {},
  "summary": {
    "failed": 1,
    "total": 1,
    "collected": 1
  },
  "collectors": [
    {
      "nodeid": "",
      "outcome": "passed",
      "result": [
        {
          "nodeid": "tests/test_app.py::test_add_url_db_error",
          "type": "Function",
          "lineno": 110
        }
      ]
    }
  ],
  "tests": [
    {
      "nodeid": "tests/test_app.py::test_add_url_db_error",
      "lineno": 110,
      "outcome": "failed",
      "setup": {
        "duration": 0.13371402799384668,
        "outcome": "passed"
      },
      "call": {
        "duration": 0.07962724397657439,
        "outcome": "failed",
        "crash": {
          "path": "/mnt/c/Users/sr0on/Projects/python-project-83/tests/test_app.py",
          "lineno": 134,
          "message": "assert '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b' in '<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</title>\\n    \\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\\n    \\n    <style>\\n        body {\\n            padding-top: 3rem;\\n            padding-bottom: 3rem;\\n        }\\n        .footer {\\n            background-color: #f5f5f5;\\n            padding: 1.5rem 0;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\\n        <div class=\"container\">\\n            <a class=\"navbar-brand\" href=\"/\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</a>\\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\\n                <span class=\"navbar-toggler-icon\"></span>\\n            </button>\\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\\n                <ul class=\"navbar-nav\">\\n                    <li class=\"nav-item\">\\n                        <a class=\"nav-link\" href=\"/\">\u0413\u043b\u0430\u0432\u043d\u0430\u044f</a>\\n                    </li>\\n                    <li class=\"nav-it...\u0440\u043e\u0432\u0435\u0440\u043a\u0438</h2>\\n<form method=\"post\" action=\"/urls/2/checks\">\\n    <button type=\"submit\" class=\"btn btn-primary\">\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443</button>\\n</form>\\n\\n<div class=\"table-responsive\">\\n    <table class=\"table table-bordered table-hover mt-2\" data-test=\"checks\">\\n        <thead>\\n            <tr>\\n                <th>ID</th>\\n                <th>\u041a\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u0430</th>\\n                <th>h1</th>\\n                <th>Title</th>\\n                <th>Description</th>\\n                <th>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            \\n            <tr>\\n                <td colspan=\"6\" class=\"text-center\">\u041f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442</td>\\n            </tr>\\n            \\n        </tbody>\\n    </table>\\n</div>\\n\\n    </main>\\n\\n    <footer class=\"footer mt-auto py-3 bg-light\">\\n        <div class=\"container\">\\n            <span class=\"text-muted\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u00a9 2025</span>\\n        </div>\\n    </footer>\\n\\n    <script \\n        src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"\\n        integrity=\"sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL\"\\n        crossorigin=\"anonymous\"></script>\\n</body>\\n</html>'\n +  where '<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</title>\\n    \\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\\n    \\n    <style>\\n        body {\\n            padding-top: 3rem;\\n            padding-bottom: 3rem;\\n        }\\n        .footer {\\n            background-color: #f5f5f5;\\n            padding: 1.5rem 0;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\\n        <div class=\"container\">\\n            <a class=\"navbar-brand\" href=\"/\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</a>\\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\\n                <span class=\"navbar-toggler-icon\"></span>\\n            </button>\\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\\n                <ul class=\"navbar-nav\">\\n                    <li class=\"nav-item\">\\n                        <a class=\"nav-link\" href=\"/\">\u0413\u043b\u0430\u0432\u043d\u0430\u044f</a>\\n                    </li>\\n                    <li class=\"nav-it...\u0440\u043e\u0432\u0435\u0440\u043a\u0438</h2>\\n<form method=\"post\" action=\"/urls/2/checks\">\\n    <button type=\"submit\" class=\"btn btn-primary\">\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443</button>\\n</form>\\n\\n<div class=\"table-responsive\">\\n    <table class=\"table table-bordered table-hover mt-2\" data-test=\"checks\">\\n        <thead>\\n            <tr>\\n                <th>ID</th>\\n                <th>\u041a\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u0430</th>\\n                <th>h1</th>\\n                <th>Title</th>\\n                <th>Description</th>\\n                <th>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            \\n            <tr>\\n                <td colspan=\"6\" class=\"text-center\">\u041f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442</td>\\n            </tr>\\n            \\n        </tbody>\\n    </table>\\n</div>\\n\\n    </main>\\n\\n    <footer class=\"footer mt-auto py-3 bg-light\">\\n        <div class=\"container\">\\n            <span class=\"text-muted\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u00a9 2025</span>\\n        </div>\\n    </footer>\\n\\n    <script \\n        src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"\\n        integrity=\"sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL\"\\n        crossorigin=\"anonymous\"></script>\\n</body>\\n</html>' = <WrapperTestResponse 3589 bytes [200 OK]>.text"
        },
        "traceback": [
          {
            "path": "tests/test_app.py",
            "lineno": 134,
            "message": "AssertionError"
          }
        ],
        "longrepr": "client = <FlaskClient <Flask 'page_analyzer.app'>>, monkeypatch = <_pytest.monkeypatch.MonkeyPatch object at 0x711afbb442f0>\n\n    def test_add_url_db_error(client, monkeypatch):\n        def mock_add_url(url):\n            raise Exception(\"Database error\")\n    \n        monkeypatch.setattr('page_analyzer.db.add_url', mock_add_url)\n    \n        with client.session_transaction() as session:\n            session.clear()\n    \n        response = client.post(\n            '/urls',\n            data={'url': 'https://example.com'},\n            follow_redirects=True\n        )\n    \n        print(\"=\"*80)\n        print(\"Response status code:\", response.status_code)\n        print(\"Response text length:\", len(response.text))\n        print(\"Flash messages in session:\", get_flashed_messages())\n        print(\"Response text snippet:\", response.text[:500])\n        print(\"=\"*80)\n    \n        assert response.status_code == 200\n>       assert '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b' in response.text\nE       assert '\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b' in '<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</title>\\n    \\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\\n    \\n    <style>\\n        body {\\n            padding-top: 3rem;\\n            padding-bottom: 3rem;\\n        }\\n        .footer {\\n            background-color: #f5f5f5;\\n            padding: 1.5rem 0;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\\n        <div class=\"container\">\\n            <a class=\"navbar-brand\" href=\"/\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</a>\\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\\n                <span class=\"navbar-toggler-icon\"></span>\\n            </button>\\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\\n                <ul class=\"navbar-nav\">\\n                    <li class=\"nav-item\">\\n                        <a class=\"nav-link\" href=\"/\">\u0413\u043b\u0430\u0432\u043d\u0430\u044f</a>\\n                    </li>\\n                    <li class=\"nav-it...\u0440\u043e\u0432\u0435\u0440\u043a\u0438</h2>\\n<form method=\"post\" action=\"/urls/2/checks\">\\n    <button type=\"submit\" class=\"btn btn-primary\">\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443</button>\\n</form>\\n\\n<div class=\"table-responsive\">\\n    <table class=\"table table-bordered table-hover mt-2\" data-test=\"checks\">\\n        <thead>\\n            <tr>\\n                <th>ID</th>\\n                <th>\u041a\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u0430</th>\\n                <th>h1</th>\\n                <th>Title</th>\\n                <th>Description</th>\\n                <th>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            \\n            <tr>\\n                <td colspan=\"6\" class=\"text-center\">\u041f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442</td>\\n            </tr>\\n            \\n        </tbody>\\n    </table>\\n</div>\\n\\n    </main>\\n\\n    <footer class=\"footer mt-auto py-3 bg-light\">\\n        <div class=\"container\">\\n            <span class=\"text-muted\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u00a9 2025</span>\\n        </div>\\n    </footer>\\n\\n    <script \\n        src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"\\n        integrity=\"sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL\"\\n        crossorigin=\"anonymous\"></script>\\n</body>\\n</html>'\nE        +  where '<!DOCTYPE html>\\n<html lang=\"ru\">\\n<head>\\n    <meta charset=\"UTF-8\">\\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n    <title>\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</title>\\n    \\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\\n    \\n    <style>\\n        body {\\n            padding-top: 3rem;\\n            padding-bottom: 3rem;\\n        }\\n        .footer {\\n            background-color: #f5f5f5;\\n            padding: 1.5rem 0;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\\n        <div class=\"container\">\\n            <a class=\"navbar-brand\" href=\"/\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446</a>\\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\">\\n                <span class=\"navbar-toggler-icon\"></span>\\n            </button>\\n            <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\\n                <ul class=\"navbar-nav\">\\n                    <li class=\"nav-item\">\\n                        <a class=\"nav-link\" href=\"/\">\u0413\u043b\u0430\u0432\u043d\u0430\u044f</a>\\n                    </li>\\n                    <li class=\"nav-it...\u0440\u043e\u0432\u0435\u0440\u043a\u0438</h2>\\n<form method=\"post\" action=\"/urls/2/checks\">\\n    <button type=\"submit\" class=\"btn btn-primary\">\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443</button>\\n</form>\\n\\n<div class=\"table-responsive\">\\n    <table class=\"table table-bordered table-hover mt-2\" data-test=\"checks\">\\n        <thead>\\n            <tr>\\n                <th>ID</th>\\n                <th>\u041a\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u0430</th>\\n                <th>h1</th>\\n                <th>Title</th>\\n                <th>Description</th>\\n                <th>\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</th>\\n            </tr>\\n        </thead>\\n        <tbody>\\n            \\n            <tr>\\n                <td colspan=\"6\" class=\"text-center\">\u041f\u0440\u043e\u0432\u0435\u0440\u043e\u043a \u043f\u043e\u043a\u0430 \u043d\u0435\u0442</td>\\n            </tr>\\n            \\n        </tbody>\\n    </table>\\n</div>\\n\\n    </main>\\n\\n    <footer class=\"footer mt-auto py-3 bg-light\">\\n        <div class=\"container\">\\n            <span class=\"text-muted\">\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0441\u0442\u0440\u0430\u043d\u0438\u0446 \u00a9 2025</span>\\n        </div>\\n    </footer>\\n\\n    <script \\n        src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js\"\\n        integrity=\"sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL\"\\n        crossorigin=\"anonymous\"></script>\\n</body>\\n</html>' = <WrapperTestResponse 3589 bytes [200 OK]>.text\n\ntests/test_app.py:134: AssertionError"
      },
      "teardown": {
        "duration": 0.00018447398906573653,
        "outcome": "passed"
      }
    }
  ]
}